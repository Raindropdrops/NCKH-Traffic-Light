# ðŸ”Œ WIRING â€” 4 LED Module Setup (ESP32 DevKit V1)

> SÆ¡ Ä‘á»“ Ä‘áº¥u dÃ¢y 4 module LED giao thÃ´ng (N, S, E, W) vá»›i ESP32

---

## âš ï¸ LÆ°u Ã Quan Trá»ng

### TrÃ¡nh Strap Pins (Boot lá»—i)

**KHÃ”NG dÃ¹ng cÃ¡c GPIO sau cho output LED:**

| GPIO   | LÃ½ do                               |
| ------ | ----------------------------------- |
| GPIO0  | Boot mode select (LOW = download)   |
| GPIO2  | Boot mode (must be LOW/floating)    |
| GPIO5  | Boot mode (strapping)               |
| GPIO12 | Boot mode (MTDI, VDD_SDIO)          |
| GPIO15 | Boot mode (MTDO, silences boot log) |

### Active HIGH

- LED module active HIGH: GPIO HIGH = LED sÃ¡ng
- Äiá»‡n Ã¡p logic: 3.3V
- DÃ²ng max per GPIO: 12mA (dÃ¹ng transistor náº¿u > 12mA)

---

## ðŸ“Œ Pinmap Máº·c Äá»‹nh

| Direction | Color  | GPIO | Note               |
| --------- | ------ | ---- | ------------------ |
| **NORTH** | RED    | 25   | Safe               |
|           | YELLOW | 26   | Safe               |
|           | GREEN  | 27   | Safe               |
| **SOUTH** | RED    | 16   | Safe               |
|           | YELLOW | 17   | Safe               |
|           | GREEN  | 22   | Changed from GPIO4 |
| **EAST**  | RED    | 32   | Safe               |
|           | YELLOW | 33   | Safe               |
|           | GREEN  | 21   | Safe               |
| **WEST**  | RED    | 19   | Safe               |
|           | YELLOW | 18   | Safe               |
|           | GREEN  | 23   | Safe               |

> **Note:** GPIO4 Ä‘Ã£ Ä‘Æ°á»£c thay báº±ng GPIO22 Ä‘á»ƒ trÃ¡nh xung Ä‘á»™t trÃªn má»™t sá»‘ board.

---

## ðŸ”§ SÆ¡ Äá»“ Äáº¥u DÃ¢y

```
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚           ESP32 DevKit V1               â”‚
                        â”‚                                         â”‚
                        â”‚  [3V3] [EN] [VP] [VN] [34] [35] [32] [33]â”‚
                        â”‚                                 E_R  E_Yâ”‚
                        â”‚                                         â”‚
                        â”‚  [GND] [23] [22] [TX] [RX] [21] [19] [18]â”‚
                        â”‚        W_G  S_G       E_G  W_R  W_Y     â”‚
                        â”‚                                         â”‚
                        â”‚  [5V] [GND] [13] [12] [14] [27] [26] [25]â”‚
                        â”‚             xxx  xxx       N_G  N_Y  N_Râ”‚
                        â”‚                                         â”‚
                        â”‚  [EN] [3V] [GND][15] [2] [4] [16] [17]  â”‚
                        â”‚             xxx  xxx xxx     S_R  S_Y   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    LED Modules:

         NORTH                    SOUTH
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ GND R Y G â”‚            â”‚ GND R Y G â”‚
    â””â”€â”€â”¬â”€â”€â”¬â”€â”¬â”€â”¬â”€â”˜            â””â”€â”€â”¬â”€â”€â”¬â”€â”¬â”€â”¬â”€â”˜
       â”‚  â”‚ â”‚ â”‚                 â”‚  â”‚ â”‚ â”‚
       â”‚  â”‚ â”‚ â””â”€â”€ GPIO27        â”‚  â”‚ â”‚ â””â”€â”€ GPIO22
       â”‚  â”‚ â””â”€â”€â”€â”€ GPIO26        â”‚  â”‚ â””â”€â”€â”€â”€ GPIO17
       â”‚  â””â”€â”€â”€â”€â”€â”€ GPIO25        â”‚  â””â”€â”€â”€â”€â”€â”€ GPIO16
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                           â”‚
                          GND (ESP32)

         EAST                     WEST
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ GND R Y G â”‚            â”‚ GND R Y G â”‚
    â””â”€â”€â”¬â”€â”€â”¬â”€â”¬â”€â”¬â”€â”˜            â””â”€â”€â”¬â”€â”€â”¬â”€â”¬â”€â”¬â”€â”˜
       â”‚  â”‚ â”‚ â”‚                 â”‚  â”‚ â”‚ â”‚
       â”‚  â”‚ â”‚ â””â”€â”€ GPIO21        â”‚  â”‚ â”‚ â””â”€â”€ GPIO23
       â”‚  â”‚ â””â”€â”€â”€â”€ GPIO33        â”‚  â”‚ â””â”€â”€â”€â”€ GPIO18
       â”‚  â””â”€â”€â”€â”€â”€â”€ GPIO32        â”‚  â””â”€â”€â”€â”€â”€â”€ GPIO19
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                           â”‚
                          GND (ESP32)
```

---

## ðŸ”— Breadboard Layout

```
    Breadboard (830 holes)
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    ESP32 DevKit V1 (centered)
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                         â”‚
    â”‚    [USB]                                                â”‚
    â”‚                                                         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Power Rails:
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    + (3.3V) â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    - (GND)  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    LED Modules (edge of breadboard):

    [NORTH]  [EAST]              [WEST]  [SOUTH]

    Jumper wires from GPIO pins to LED module signal pins
    All GND pins connected to - rail
```

---

## ðŸ“‹ Bill of Materials

| #   | Item                                      | Qty | Note                |
| --- | ----------------------------------------- | --- | ------------------- |
| 1   | ESP32 DevKit V1                           | 1   | 30-pin or 38-pin    |
| 2   | LED Traffic Module (R/Y/G common cathode) | 4   | 3.3V compatible     |
| 3   | Breadboard 830 holes                      | 1   |                     |
| 4   | Jumper wires M-M                          | 20+ |                     |
| 5   | USB Cable                                 | 1   | Micro-USB or Type-C |

---

## âš¡ Náº¿u LED Module 5V

DÃ¹ng transistor NPN 2N2222:

```
GPIO â”€â”€[1kÎ©]â”€â”€â”¬â”€â”€ Base
              â”‚
              â”‚   2N2222
              â”‚   â”Œâ”€â”€â”€â”
         GND â”€â”´â”€â”€ â”‚ E â”‚
                  â”‚   â”‚
     LED (-)  â”€â”€â”€ â”‚ C â”‚ â”€â”€â”€ LED (+) â”€â”€â”€ 5V
                  â””â”€â”€â”€â”˜
```

---

## âœ… Verification Checklist

| Test           | Expected                      |
| -------------- | ----------------------------- |
| Power on ESP32 | No boot loop                  |
| WiFi connect   | Serial shows IP               |
| MQTT connect   | Serial shows "MQTT connected" |
| Phase 0        | N+S = Green, E+W = Red        |
| Phase 3        | N+S = Red, E+W = Green        |
| BLINK mode     | All Yellow blink 1Hz          |
| OFF mode       | All LEDs off                  |

---

> ðŸ“š See also: [ESP32_FIRMWARE_GUIDE.md](ESP32_FIRMWARE_GUIDE.md) | [SPEC.md](../SPEC.md) Section 10
